<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Diagnosa Medis - Medicare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --primary-color: #00BFA5;
      --primary-dark: #00897B;
      --primary-light: #B2DFDB;
      --primary-extra-light: #E0F2F1;
      --secondary-color: #4A6FA5;
      --danger-color: #FF5252;
      --warning-color: #FFAB00;
      --success-color: #00C853;
      --text-dark: #263238;
      --text-medium: #455A64;
      --text-light: #78909C;
      --bg-light: #F5F7FA;
      --bg-medium: #ECEFF1;
      --border-color: #CFD8DC;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      --font-primary: 'Montserrat', 'Poppins', sans-serif;
      --font-secondary: 'Poppins', sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-secondary);
      background: var(--bg-light);
      color: var(--text-dark);
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      padding: 1.2rem;
      text-align: center;
      box-shadow: var(--shadow-md);
      position: relative;
      z-index: 10;
    }

    h1 {
      margin: 0;
      font-size: 1.8rem;
      font-weight: 700;
      font-family: var(--font-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      letter-spacing: 0.5px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .chat-container {
      height: calc(100vh - 180px);
      max-height: 700px;
      margin: 2rem auto;
      background: white;
      border-radius: 16px;
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .chat-header {
      padding: 1rem 1.5rem;
      background: white;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-header-info {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .chat-avatar {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: var(--primary-extra-light);
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
    }

    .chat-title {
      font-weight: 600;
      font-size: 1.15rem;
      font-family: var(--font-primary);
      color: var(--text-dark);
    }

    .chat-status {
      font-size: 0.8rem;
      color: var(--text-light);
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--success-color);
    }

    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      background-color: var(--bg-light);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      scroll-behavior: smooth;
    }

    .message {
      max-width: 80%;
      padding: 1rem 1.2rem;
      border-radius: 18px;
      position: relative;
      word-wrap: break-word;
      clear: both;
      font-size: 1rem;
      line-height: 1.5;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.3s ease-out forwards;
      box-shadow: var(--shadow-sm);
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .bot {
      background-color: white;
      color: var(--text-dark);
      align-self: flex-start;
      border-bottom-left-radius: 4px;
      border: 1px solid var(--border-color);
    }

    .user {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .message-time {
      font-size: 0.75rem;
      opacity: 0.8;
      margin-top: 0.4rem;
      display: block;
      text-align: right;
    }

    .bot .message-time {
      color: var(--text-light);
      text-align: left;
    }

    .user .message-time {
      color: rgba(255,255,255,0.8);
    }

    .input-area {
      padding: 1rem 1.5rem;
      background: white;
      border-top: 1px solid var(--border-color);
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    .input-wrapper {
      flex: 1;
      position: relative;
    }

    input[type="text"] {
      width: 100%;
      padding: 1rem 1.2rem;
      padding-right: 3rem;
      border: 1px solid var(--border-color);
      border-radius: 25px;
      font-size: 1rem;
      transition: all 0.2s ease;
      background: var(--bg-light);
      font-family: var(--font-secondary);
    }

    input[type="text"]:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,191,166,0.2);
    }

    .input-icons {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 0.5rem;
    }

    .input-icons i {
      color: var(--text-light);
      cursor: pointer;
      transition: color 0.2s;
      font-size: 1.1rem;
    }

    .input-icons i:hover {
      color: var(--primary-color);
    }

    .send-btn {
      width: 50px;
      height: 50px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 1.3rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0,191,166,0.3);
    }

    .send-btn:hover {
      background-color: var(--primary-dark);
      transform: scale(1.05);
      box-shadow: 0 3px 8px rgba(0,191,166,0.4);
    }

    .send-btn:active {
      transform: scale(0.95);
    }

    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.2rem;
      background: white;
      border-radius: 18px;
      border: 1px solid var(--border-color);
      align-self: flex-start;
      margin-bottom: 0.5rem;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.3s ease-out forwards;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: var(--text-light);
      border-radius: 50%;
      animation: typingAnimation 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
      animation-delay: 0s;
    }
    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typingAnimation {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-5px); }
    }

    .quick-replies {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.8rem;
    }

    .quick-reply {
      background: white;
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
      border-radius: 20px;
      padding: 0.6rem 1.1rem;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 0.2rem;
      font-weight: 500;
    }

    .quick-reply:hover {
      background: var(--primary-light);
      border-color: var(--primary-dark);
      color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .diagnosis-summary {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow-sm);
      margin-top: 1rem;
    }

    .summary-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: var(--font-primary);
    }

    .summary-item {
      margin-bottom: 0.8rem;
    }

    .summary-label {
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.2rem;
      display: block;
      font-size: 0.95rem;
    }

    .summary-value {
      color: var(--text-medium);
      padding-left: 1rem;
      font-size: 0.95rem;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 0.9rem 1.6rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border: none;
      font-size: 0.95rem;
      font-family: var(--font-primary);
    }

    .primary-btn {
      background-color: var(--primary-color);
      color: white;
      box-shadow: 0 2px 5px rgba(0,191,166,0.3);
    }

    .primary-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,191,166,0.4);
    }

    .secondary-btn {
      background-color: white;
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
    }

    .secondary-btn:hover {
      background-color: var(--primary-extra-light);
      transform: translateY(-2px);
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin: 1.5rem auto;
      text-decoration: none;
      color: var(--primary-color);
      font-weight: 600;
      padding: 0.9rem 1.6rem;
      border-radius: 8px;
      transition: all 0.2s ease;
      max-width: fit-content;
      font-family: var(--font-primary);
      font-size: 0.95rem;
    }

    .back-link:hover {
      background-color: var(--primary-extra-light);
      text-decoration: none;
      transform: translateY(-2px);
    }

    .footer {
      text-align: center;
      padding: 1rem;
      color: var(--text-light);
      font-size: 0.9rem;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .chat-container {
        margin: 1rem auto;
        height: calc(100vh - 140px);
        border-radius: 0;
      }
      
      header {
        padding: 1rem;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .message {
        max-width: 90%;
        font-size: 0.95rem;
      }
      
      .quick-reply {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }
      
      .action-btn, .back-link {
        padding: 0.8rem 1.4rem;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="container">
    <h1><i class="fas fa-stethoscope"></i> Diagnosa Medis</h1>
  </div>
</header>

<div class="container">
  <div class="chat-container">
    <div class="chat-header">
      <div class="chat-header-info">
        <div class="chat-avatar">
          <i class="fas fa-robot"></i>
        </div>
        <div>
          <div class="chat-title">Asisten Diagnosa Medis</div>
          <div class="chat-status">
            <span class="status-indicator"></span>
            <span>Online</span>
          </div>
        </div>
      </div>
      <div>
        <i class="fas fa-ellipsis-v" style="color: var(--text-light); cursor: pointer;"></i>
      </div>
    </div>
    
    <div class="chat-box" id="chat-box">
      <div class="message bot animate__animated animate__fadeInUp">
        Halo! Saya adalah asisten diagnosa medis Medicare. Saya akan membantu Anda untuk mengidentifikasi keluhan kesehatan Anda.
        <span class="message-time">Hari ini, 10:00</span>
      </div>
      <div class="message bot animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
        Untuk memulai, bisa Anda ceritakan apa keluhan utama Anda saat ini?
        <span class="message-time">Hari ini, 10:00</span>
        
        <div class="quick-replies">
          <div class="quick-reply">Sakit kepala</div>
          <div class="quick-reply">Demam</div>
          <div class="quick-reply">Sakit perut</div>
          <div class="quick-reply">Batuk</div>
        </div>
      </div>
    </div>
    
    <div class="input-area" id="input-area">
      <div class="input-wrapper">
        <input type="text" id="user-input" placeholder="Tulis pesan Anda..." autocomplete="off">
        <div class="input-icons">
          <i class="far fa-smile"></i>
          <i class="fas fa-paperclip"></i>
        </div>
      </div>
      <button class="send-btn" id="send-btn">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <a href="/" class="back-link animate__animated animate__fadeIn"><i class="fas fa-arrow-left"></i> Kembali ke Menu</a>
</div>

<div class="footer">
  &copy; 2023 Medicare. Seluruh hak cipta dilindungi.
</div>

<script>
  const questions = [
    {
      text: "Sudah berapa lama keluhan ini terjadi?",
      quickReplies: ["Kurang dari 1 hari", "1-3 hari", "Lebih dari 3 hari", "Lebih dari 1 minggu"]
    },
    {
      text: "Seberapa parah gejalanya pada skala 1-10? (1 = sangat ringan, 10 = sangat berat)",
      quickReplies: ["1-3 (Ringan)", "4-6 (Sedang)", "7-9 (Berat)", "10 (Sangat berat)"]
    },
    {
      text: "Apakah Anda mengalami gejala tambahan? (misalnya: demam, batuk, mual, pusing)",
      quickReplies: ["Demam", "Mual/muntah", "Pusing", "Lemas"]
    },
    {
      text: "Apa riwayat penyakit sebelumnya yang Anda miliki?",
      quickReplies: ["Hipertensi", "Diabetes", "Asma", "Tidak ada"]
    },
    {
      text: "Obat apa yang sedang Anda konsumsi saat ini?",
      quickReplies: ["Tidak ada", "Obat penghilang rasa sakit", "Obat resep dokter", "Vitamin/suplemen"]
    },
    {
      text: "Apakah Anda memiliki alergi terhadap obat atau makanan tertentu?",
      quickReplies: ["Tidak ada alergi", "Alergi obat", "Alergi makanan", "Tidak yakin"]
    },
    {
      text: "Terima kasih atas informasi yang telah Anda berikan. Data Anda akan segera ditinjau oleh tim medis kami."
    }
  ];

  let answers = [];
  let currentQuestion = 0;
  let typingTimeout;

  function getCurrentTime() {
    const now = new Date();
    return now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
  }

  function showTypingIndicator() {
    const chatBox = document.getElementById("chat-box");
    const typingIndicator = document.createElement("div");
    typingIndicator.className = "typing-indicator";
    typingIndicator.innerHTML = `
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    `;
    chatBox.appendChild(typingIndicator);
    chatBox.scrollTop = chatBox.scrollHeight;
    return typingIndicator;
  }

  function hideTypingIndicator(indicator) {
    if (indicator && indicator.parentNode) {
      indicator.parentNode.removeChild(indicator);
    }
  }

  function addMessage(text, isUser) {
    const chatBox = document.getElementById("chat-box");
    const message = document.createElement("div");
    message.className = `message ${isUser ? 'user' : 'bot'} animate__animated animate__fadeInUp`;
    message.innerHTML = `
      ${text}
      <span class="message-time">Hari ini, ${getCurrentTime()}</span>
    `;
    chatBox.appendChild(message);
    // Auto-scroll to bottom
    chatBox.scrollTo({
      top: chatBox.scrollHeight,
      behavior: 'smooth'
    });
    return message;
  }

  function addQuickReplies(replies, parentElement) {
    if (!replies || replies.length === 0) return;
    
    const quickRepliesContainer = document.createElement("div");
    quickRepliesContainer.className = "quick-replies";
    
    replies.forEach(reply => {
      const quickReply = document.createElement("div");
      quickReply.className = "quick-reply";
      quickReply.textContent = reply;
      
      quickReply.addEventListener('click', function() {
        document.getElementById("user-input").value = reply;
        nextQuestion();
      });
      
      quickRepliesContainer.appendChild(quickReply);
    });
    
    parentElement.appendChild(quickRepliesContainer);
    // Auto-scroll to show quick replies
    document.getElementById("chat-box").scrollTo({
      top: document.getElementById("chat-box").scrollHeight,
      behavior: 'smooth'
    });
  }

  function showSummary() {
    const chatBox = document.getElementById("chat-box");
    const summary = document.createElement("div");
    summary.className = "message bot animate__animated animate__fadeInUp";
    
    const labels = [
      "Keluhan utama", 
      "Durasi keluhan", 
      "Tingkat keparahan", 
      "Gejala tambahan", 
      "Riwayat penyakit", 
      "Obat yang dikonsumsi", 
      "Alergi"
    ];
    
    let summaryHTML = `
      <div class="diagnosis-summary">
        <div class="summary-title">
          <i class="fas fa-file-medical"></i>
          Ringkasan Diagnosa Anda
        </div>
    `;
    
    labels.forEach((label, index) => {
      summaryHTML += `
        <div class="summary-item">
          <div class="summary-label">${label}</div>
          <div class="summary-value">${answers[index] || '-'}</div>
        </div>
      `;
    });
    
    summaryHTML += `
        <div class="action-buttons">
          <button class="action-btn primary-btn" onclick="submitDiagnosis()">
            <i class="fas fa-paper-plane"></i> Kirim ke Dokter
          </button>
          <button class="action-btn secondary-btn" onclick="startNewDiagnosis()">
            <i class="fas fa-redo"></i> Mulai Baru
          </button>
        </div>
      </div>
      <span class="message-time">Hari ini, ${getCurrentTime()}</span>
    `;
    
    summary.innerHTML = summaryHTML;
    chatBox.appendChild(summary);
    // Auto-scroll to show summary
    chatBox.scrollTo({
      top: chatBox.scrollHeight,
      behavior: 'smooth'
    });
    
    // Hide input area
    document.getElementById("input-area").style.display = "none";
  }

  function nextQuestion() {
    const input = document.getElementById("user-input");
    const userText = input.value.trim();
    if (!userText) return;

    // Add user message
    addMessage(userText, true);
    answers.push(userText);
    input.value = "";

    // Show typing indicator
    const typingIndicator = showTypingIndicator();
    
    // Clear any existing timeout
    if (typingTimeout) clearTimeout(typingTimeout);
    
    // Simulate bot thinking
    typingTimeout = setTimeout(() => {
      hideTypingIndicator(typingIndicator);
      
      // Add next question or show summary
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        const question = questions[currentQuestion];
        const botMessage = addMessage(question.text, false);
        if (question.quickReplies) {
          addQuickReplies(question.quickReplies, botMessage);
        }
      } else {
        showSummary();
      }
    }, 1500);
  }

  function submitDiagnosis() {
    // In a real app, this would send data to server
    alert("Diagnosa Anda telah dikirim ke dokter. Anda akan segera mendapatkan notifikasi ketika dokter telah meninjau kasus Anda.");
  }

  function startNewDiagnosis() {
    // Reset conversation
    const chatBox = document.getElementById("chat-box");
    chatBox.innerHTML = `
      <div class="message bot animate__animated animate__fadeInUp">
        Halo! Mari kita mulai diagnosa baru. Apa keluhan utama Anda saat ini?
        <span class="message-time">Hari ini, ${getCurrentTime()}</span>
        
        <div class="quick-replies">
          <div class="quick-reply">Sakit kepala</div>
          <div class="quick-reply">Demam</div>
          <div class="quick-reply">Sakit perut</div>
          <div class="quick-reply">Batuk</div>
        </div>
      </div>
    `;
    
    // Set up event listeners for new quick replies
    document.querySelectorAll('.quick-reply').forEach(reply => {
      reply.addEventListener('click', function() {
        document.getElementById("user-input").value = this.textContent;
        nextQuestion();
      });
    });
    
    answers = [];
    currentQuestion = 0;
    document.getElementById("input-area").style.display = "flex";
  }

  // Event listeners
  document.getElementById("user-input").addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      nextQuestion();
    }
  });

  document.getElementById("send-btn").addEventListener("click", nextQuestion);

  // Set up event listeners for initial quick replies
  document.querySelectorAll('.quick-reply').forEach(reply => {
    reply.addEventListener('click', function() {
      document.getElementById("user-input").value = this.textContent;
      nextQuestion();
    });
  });

  // Initial animation
  document.addEventListener("DOMContentLoaded", function() {
    setTimeout(() => {
      document.querySelector(".back-link").classList.add("animate__fadeIn");
    }, 500);
  });
</script>

</body>
</html>